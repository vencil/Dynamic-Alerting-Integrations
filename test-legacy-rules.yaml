groups:
  - name: legacy-alerts
    rules:
      - alert: MySQLTooManyConnections
        expr: mysql_global_status_threads_connected > 100
        for: 5m
        labels:
          severity: warning
      - alert: MySQLHighSlowQueries
        expr: rate(mysql_global_status_slow_queries[5m]) > 0.1
        for: 5m
        labels:
          severity: warning
      - alert: MySQLBufferPoolFull
        expr: mysql_global_status_innodb_buffer_pool_pages_data / mysql_global_status_innodb_buffer_pool_pages_total * 100 > 95
        for: 10m
        labels:
          severity: warning
      - alert: RedisHighMemory
        expr: redis_memory_used_bytes > 4294967296
        for: 5m
        labels:
          severity: warning
      - alert: MySQLPredictedDiskFull
        expr: predict_linear(mysql_disk_usage[1h], 3600*24) > 1000000000
        for: 15m
        labels:
          severity: critical
