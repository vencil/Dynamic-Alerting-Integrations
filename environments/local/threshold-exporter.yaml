# Local development environment configuration for threshold-exporter

image:
  repository: threshold-exporter
  tag: dev
  pullPolicy: Never  # Use local image loaded via 'kind load'

service:
  type: ClusterIP
  port: 8080
  annotations:
    prometheus.io/scrape: "true"
    prometheus.io/port: "8080"
    prometheus.io/path: "/metrics"

exporter:
  listenAddr: ":8080"
  reloadInterval: "15s"    # Faster reload for local dev

# Threshold config for local testing
thresholdConfig:
  defaults:
    mysql_connections: 80
    mysql_cpu: 80
    container_cpu: 80
    container_memory: 85
  state_filters:
    container_crashloop:
      reasons: ["CrashLoopBackOff"]
      severity: "critical"
    container_imagepull:
      reasons: ["ImagePullBackOff", "InvalidImageName"]
      severity: "warning"
  tenants:
    db-a:
      mysql_connections: "70"
      container_cpu: "70"
    db-b:
      mysql_connections: "100"
      mysql_cpu: "60"
      container_memory: "90"
      _state_container_crashloop: "disable"

resources:
  requests:
    cpu: 50m
    memory: 64Mi
  limits:
    cpu: 200m
    memory: 128Mi

replicaCount: 1
