============================================================
é·ç§»å ±å‘Š (Migration Report) â€” v4 (AST engine)
============================================================

ç¸½è¦å‰‡æ•¸: 4
  âœ… å®Œç¾è§£æ: 2
  âš ï¸  è¤‡é›œè¡¨é”å¼ (å·²è‡ªå‹•çŒœæ¸¬): 1
  ğŸš¨ ç„¡æ³•è§£æ (éœ€ LLM å”åŠ©): 1
  ğŸ“– å»ºè­°ä½¿ç”¨é»ƒé‡‘æ¨™æº–: 3

----------------------------------------
ğŸ“– å»ºè­°ä½¿ç”¨é»ƒé‡‘æ¨™æº– â€” è«‹ç”¨ scaffold_tenant.py è¨­å®šé–¾å€¼
----------------------------------------
  â€¢ MySQLTooManyConnections
    â†’ é»ƒé‡‘æ¨™æº–: MariaDBHighConnections
    â†’ Metric Key: mysql_connections
    â†’ Rule Pack: mariadb
    â†’ ç›´æ¥ä½¿ç”¨ scaffold_tenant.py è¨­å®š mysql_connections é–¾å€¼
  â€¢ MySQLHighSlowQueries
    â†’ é»ƒé‡‘æ¨™æº–: MariaDBHighSlowQueries
    â†’ Metric Key: mysql_slow_queries
    â†’ Rule Pack: mariadb
    â†’ rate() æŒ‡æ¨™ â€” ä½¿ç”¨é»ƒé‡‘æ¨™æº–çš„ sum by(tenant) èšåˆ
  â€¢ MySQLTooManyConnectionsCritical
    â†’ é»ƒé‡‘æ¨™æº–: MariaDBHighConnections
    â†’ Metric Key: mysql_connections
    â†’ Rule Pack: mariadb
    â†’ ç›´æ¥ä½¿ç”¨ scaffold_tenant.py è¨­å®š mysql_connections é–¾å€¼

----------------------------------------
âœ… å®Œç¾è§£æçš„è¦å‰‡
----------------------------------------

----------------------------------------
âš ï¸  è¤‡é›œè¡¨é”å¼ â€” å·²è‡ªå‹•çŒœæ¸¬èšåˆæ¨¡å¼ï¼Œå»ºè­°äººå·¥ç¢ºèª
----------------------------------------

----------------------------------------
ğŸš¨ ç„¡æ³•è‡ªå‹•è§£æ â€” è«‹å°‡ä»¥ä¸‹ LLM Prompt äº¤çµ¦ Claude è™•ç†
----------------------------------------

### MySQLDown ###
è«‹å°‡ä»¥ä¸‹å‚³çµ± Prometheus Alert è½‰æ›ç‚ºæœ¬å°ˆæ¡ˆçš„å‹•æ…‹å¤šç§Ÿæˆ¶æ¶æ§‹ï¼š
è¦æ±‚ï¼š
1. æå–é–¾å€¼ä¸¦æä¾› threshold-config.yaml ç¯„ä¾‹ã€‚
2. æä¾›åŒ…å« sum/max by(tenant) çš„ Recording Ruleã€‚
3. æä¾›å¥—ç”¨ group_left èˆ‡ unless maintenance é‚è¼¯çš„ Alert Ruleã€‚
4. å¦‚æœ‰ç¶­åº¦æ¨™ç±¤ (å¦‚ queue, db, index)ï¼Œè«‹ç”¨ "metric{label=\"value\"}" èªæ³•æä¾›ç¯„ä¾‹ã€‚

åŸå§‹è¦å‰‡ï¼š
- alert: MySQLDown
  expr: absent(mysql_up) == 1
  for: 1m
  labels:
    severity: critical
  annotations:
    summary: MySQL instance is down

