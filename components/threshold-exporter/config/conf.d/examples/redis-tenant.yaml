# redis-tenant.yaml â€” ç¯„ä¾‹: Redis ç§Ÿæˆ¶é–¾å€¼è¨­å®š (Phase 2B ç¶­åº¦æ¨™ç±¤)
# ä¾†æºåƒè€ƒ: Oliver006/redis_exporter + Prometheus Community redis rules
#
# ğŸ“Œ åŸºæœ¬é–¾å€¼: é©ç”¨æ‰€æœ‰ç¶­åº¦ (å…¨åŸŸ)
# ğŸ“ ç¶­åº¦é–¾å€¼: é‡å°ç‰¹å®š queue/db è¨­å®šä¸åŒæ°´ä½
#
# ä¸‰æ…‹: æ•¸å€¼=Custom, çœç•¥=Default, "disable"=åœç”¨
# ç¶­åº¦ severity èªæ³•: "value:severity" (å¦‚ "1000:critical")
tenants:
  redis-prod:
    # --- åŸºæœ¬é–¾å€¼ (å…¨åŸŸ) ---
    redis_memory_used_bytes: "8589934592"                  # 8GB warning
    redis_memory_used_bytes_critical: "10737418240"        # 10GB critical
    redis_connected_clients: "500"
    redis_rejected_connections: "10"
    redis_keyspace_misses_ratio: "0.3"                     # 30% miss rate

    # --- ç¶­åº¦é–¾å€¼: æŒ‰ queue åˆ†è¨­ ---
    # èªæ³•: "metric{label=\"value\"}": "threshold" æˆ– "threshold:severity"
    "redis_queue_length{queue=\"order-processing\"}": "100"
    "redis_queue_length{queue=\"order-processing\"}": "500:critical"
    "redis_queue_length{queue=\"email-notifications\"}": "1000"
    "redis_queue_length{queue=\"analytics\"}": "5000"

    # --- ç¶­åº¦é–¾å€¼: æŒ‰ db åˆ†è¨­ ---
    "redis_db_keys{db=\"db0\"}": "1000000"                 # db0 ä¸»åº« 100 è¬ keys
    "redis_db_keys{db=\"db1\"}": "500000"                  # db1 å¿«å–åº« 50 è¬ keys
    "redis_db_keys{db=\"db2\"}": "disable"                 # db2 æš«ä¸ç›£æ§

    # --- ç‹€æ…‹æ§åˆ¶ ---
    _state_maintenance: "enable"                            # ç¶­è­·æ¨¡å¼é—œé–‰
